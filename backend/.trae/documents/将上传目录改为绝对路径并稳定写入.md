## 目标
- 解决 MultipartFile.transferTo 使用相对路径导致写入到 Tomcat 临时目录而报错的问题
- 将上传目录改为明确的绝对路径，并使用稳定的流拷贝方式写入，兼容 Windows

## 快速修复（无需配置文件）
1. 在 `FilesUploadController.upload` 中将目录改为绝对路径：
   - `Path dir = Paths.get("uploads").toAbsolutePath();`
   - `Files.createDirectories(dir);`
2. 使用流拷贝替代 `transferTo`：
   - `Files.copy(file.getInputStream(), target, java.nio.file.StandardCopyOption.REPLACE_EXISTING);`
3. URL 保持不变：`"/uploads/" + newName`
4. `WebConfig` 现有静态映射 `addResourceLocations("file:uploads/")` 可继续使用（与工作目录下的绝对 `uploads` 同一路径）

## 可配置方案（支持任意绝对路径）
1. 在 `application.properties` 增加：
   - `file.upload-dir=D:/secondhand/uploads`
2. 控制器读取配置：
   - `@Value("${file.upload-dir:uploads}") private String uploadDir;`
   - `Path dir = Paths.get(uploadDir).toAbsolutePath(); Files.createDirectories(dir);`
   - 写入同上使用 `Files.copy(...)`
3. 静态资源映射与配置保持一致：
   - `registry.addResourceHandler("/uploads/**").addResourceLocations("file:" + Paths.get(uploadDir).toAbsolutePath().toString() + "/");`

## 验证
- 以 FormData 上传图片，返回形如 `data: "/uploads/{uuid}.png"`
- 在本机绝对目录中确认文件已写入
- 访问 `http://localhost:8080/uploads/{uuid}.png` 能正常加载

## 注意事项
- 保持前端不手动设置 `Content-Type`，让浏览器自动生成 multipart 分隔头
- Windows 绝对路径需使用正斜杠或确保 `file:` 前缀格式正确（例如 `file:/D:/secondhand/uploads/`）

## 选择建议
- 临时修复：采用“快速修复”方案即可，避免写入到临时目录
- 若需将来部署到不同磁盘或共享存储：采用“可配置方案”，通过配置切换绝对路径