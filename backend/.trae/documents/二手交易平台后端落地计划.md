## 范围与目标
- 仅实现实体（Entity）、Mapper 接口与 Service 层基础 CRUD；不编写 Controller/接口。
- 严格根据 `/e:/JavaWeb/SecondHandSystem/document/Database.md` 与计划书片段（L13–43）进行字段与类型映射。

## 代码结构与约定
- 包结构：
  - `com.lyx.secondhandsystem.entity`（实体）
  - `com.lyx.secondhandsystem.mapper`（Mapper）
  - `com.lyx.secondhandsystem.service`（Service 接口）
  - `com.lyx.secondhandsystem.service.impl`（Service 实现）
- 注解与类型：
  - `@TableName`、`@TableId(IdType.AUTO)`、`@TableField`；时间类型使用 `LocalDateTime`。
  - 下划线列名用 `@TableField("snake_case")` 显式映射。
  - `products.images` 使用 `JacksonTypeHandler` 映射 `List<String>`，并在 `Product` 类上启用 `@TableName(autoResultMap = true)`。
  - ENUM/状态字段先用 `String/Integer` 承载（后续如需再改 Java Enum）。

## 待实现实体
- `Product` → 表 `products`
  - 主键：`product_id`
  - 字段：`seller_id`、`category_id`、`title`、`description`、`price`（`BigDecimal`）、`images`（`List<String>`，`@TableField(typeHandler = JacksonTypeHandler.class)`）、`status`（`Integer`：0/1/2/3/4）、`rejection_reason`、`view_count`、`created_at`、`updated_at`
  - 类注解：`@TableName(value = "products", autoResultMap = true)`
- `Category` → 表 `categories`
  - 主键：`category_id`
  - 字段：`name`（唯一）、`sort_order`、`created_at`
- `ShoppingCart` → 表 `shopping_cart`
  - 主键：`cart_id`
  - 字段：`user_id`、`product_id`、`created_at`（唯一键 `user_id+product_id` 由 DB 保证）
- `Order` → 表 `orders`
  - 主键：`order_id`
  - 字段：`order_number`、`buyer_id`、`seller_id`、`product_id`、`product_title_snapshot`、`product_image_snapshot`、`transaction_price`（`BigDecimal`）、`shipping_name`、`shipping_phone`、`shipping_address`、`tracking_number`、`payment_method`（`String`：`alipay|wechat`）、`status`（`Integer`：0/1/2/3）、`created_at`、`updated_at`
- `Message` → 表 `messages`
  - 主键：`message_id`
  - 字段：`sender_id`、`receiver_id`、`content`、`is_read`（`Boolean`）、`created_at`
- 说明：`User` 已存在，保留字段与映射（`role` 用 `String`）。

## Mapper 接口（每个实体一个）
- 路径：`com.lyx.secondhandsystem.mapper.*`
- 内容：`interface XxxMapper extends BaseMapper<Xxx>`；保留 `@Mapper`（已在入口类使用 `@MapperScan`）。

## Service 层基础 CRUD
- 每个实体对应接口与实现：
  - 通用方法：`create(entity)`、`getById(id)`、`list(page, filters)`、`update(entity)`、`deleteById(id)`。
- 常用筛选：
  - Products：按 `sellerId`、`categoryId`、`keyword` 分页；排序仅用于演示（价格/最新）。
  - ShoppingCart：按 `userId` 查询；支持按 `productId` 删除。
  - Orders：按 `buyerId`/`sellerId` 查询列表。
  - Messages：按 `senderId`/`receiverId` 查询对话记录。

## 校验与类型处理
- 所有实体时间字段用 `LocalDateTime`；DB 默认值生效即可。
- 明确 `@TableField` 指定列名，防止下划线自动映射遗漏。
- `products.images` 开启自动 JSON↔List 转换，不进行手动字符串解析。

## 简单验证（不暴露接口）
- 编写少量 Service 层单元测试或命令行运行校验：
  - `Product` 新增/更新/分页查询；
  - `ShoppingCart` 唯一键冲突行为；
  - `Order` 基础 CRUD（不含业务事务）。

## 交付方式
- 一次提交包含：所有实体与 Mapper、Service 接口与实现、基础构建可通过（`mvn clean package`）。
- 随交付附带简短说明列出文件路径与关键映射（特别是 `Product.images`）。

确认后我将开始实现上述文件与方法，严格按数据库设计与约定完成实体与基础 CRUD。