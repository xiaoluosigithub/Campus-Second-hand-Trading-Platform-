## 结论
- 不需要修改数据库表结构即可实现聊天界面显示对方昵称与头像。
- 通过在消息与联系人接口的响应 DTO 中补充用户公开资料字段，并在服务层一次性查询并聚合即可满足需求。

## 接口改动
1. 会话消息：`GET /api/messages`
- 将返回记录改为 DTO `MessageItemResponse`，在原有字段基础上新增：
  - `senderNickname`、`senderAvatarUrl`
  - `receiverNickname`、`receiverAvatarUrl`
- 分页结构保持不变（`records/total/size/current/pages`）。

2. 联系人列表：`GET /api/messages/contacts`
- 扩展现有返回项（或新建 `ContactItemResponse`），在 `contactId/lastAt` 上新增：
  - `contactNickname`、`contactAvatarUrl`

## 服务实现
- 批量查询资料：从消息或联系人集合中汇总涉及的 `userId`，调用 `UserService` 一次性查询，构建 `Map<Integer,User>`。
- 组装 DTO：在 `MessageService`/`MessageController` 中以该 Map 填充昵称与头像，避免 N+1 查询。
- 认证与权限：保持现有 Session 校验与本人资源校验逻辑不变。

## 数据库
- 不做任何结构或索引改动。
- 依赖现有 `users(nickname, avatar_url)` 与 `messages(sender_id, receiver_id)` 字段即可。

## 文档更新
- 更新接口文档：为上述两个接口补充新增字段说明与示例 JSON，前端据此直接渲染头像与昵称。

## 兼容性
- 保留原有基础字段不变，仅在记录项中新增资料字段；前端平滑升级即可。